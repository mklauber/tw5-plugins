{"title":"$:/plugins/D&DTools/EncounterBuilder","author":"Matt Lauber","created":"2019-09-09T14:28:48.203Z","description":"D&D Encounter Builder","list":"","modified":"2019-09-10T19:06:41.385Z","plugin-priority":"1","plugin-type":"plugin","version":"1.0.8","tags":"[[D&D]]","summary":"D&D 5e Encounter Builder Tool","source":"https://github.com/mklauber/tw5-encounter-builder","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/DMTools/EncounterBuilder/icons/Bloodied\":{\"title\":\"$:/plugins/DMTools/EncounterBuilder/icons/Bloodied\",\"created\":\"20190811212741068\",\"modified\":\"20190811213141982\",\"tags\":\"\",\"type\":\"image/svg+xml\",\"text\":\"<svg\\n   xmlns:dc=\\\"http://purl.org/dc/elements/1.1/\\\"\\n   xmlns:cc=\\\"http://creativecommons.org/ns#\\\"\\n   xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\"\\n   xmlns:svg=\\\"http://www.w3.org/2000/svg\\\"\\n   xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n   xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n   xmlns:sodipodi=\\\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\\\"\\n   xmlns:inkscape=\\\"http://www.inkscape.org/namespaces/inkscape\\\"\\n   id=\\\"svg4291\\\"\\n   version=\\\"1.1\\\"\\n   height=\\\"20\\\"\\nviewBox=\\\"0 0 500 816\\\"\\n   inkscape:version=\\\"0.48.0 r9654\\\"\\n   sodipodi:docname=\\\"Blood drop.svg\\\">\\n  <title\\n     id=\\\"title4324\\\">Blood drop</title>\\n  <defs\\n     id=\\\"defs4293\\\">\\n    <radialGradient\\n       inkscape:collect=\\\"always\\\"\\n       xlink:href=\\\"#linearGradient4238\\\"\\n       id=\\\"radialGradient4244\\\"\\n       cx=\\\"1198.7987\\\"\\n       cy=\\\"-54.180092\\\"\\n       fx=\\\"1198.7987\\\"\\n       fy=\\\"-54.180092\\\"\\n       r=\\\"23.688101\\\"\\n       gradientTransform=\\\"matrix(1,0,0,1.6332284,0,38.146561)\\\"\\n       gradientUnits=\\\"userSpaceOnUse\\\" />\\n    <linearGradient\\n       inkscape:collect=\\\"always\\\"\\n       id=\\\"linearGradient4238\\\">\\n      <stop\\n         style=\\\"stop-color:#b00000;stop-opacity:0;\\\"\\n         offset=\\\"0\\\"\\n         id=\\\"stop4240\\\" />\\n      <stop\\n         style=\\\"stop-color:#b00000;stop-opacity:1;\\\"\\n         offset=\\\"1\\\"\\n         id=\\\"stop4242\\\" />\\n    </linearGradient>\\n    <filter\\n       color-interpolation-filters=\\\"sRGB\\\"\\n       inkscape:collect=\\\"always\\\"\\n       id=\\\"filter4262\\\"\\n       x=\\\"-0.19924036\\\"\\n       width=\\\"1.3984807\\\"\\n       y=\\\"-0.063234031\\\"\\n       height=\\\"1.1264681\\\">\\n      <feGaussianBlur\\n         inkscape:collect=\\\"always\\\"\\n         stdDeviation=\\\"1.4048842\\\"\\n         id=\\\"feGaussianBlur4264\\\" />\\n    </filter>\\n  </defs>\\n  <sodipodi:namedview\\n     id=\\\"base\\\"\\n     pagecolor=\\\"#ffffff\\\"\\n     bordercolor=\\\"#666666\\\"\\n     borderopacity=\\\"1.0\\\"\\n     inkscape:pageopacity=\\\"0.0\\\"\\n     inkscape:pageshadow=\\\"2\\\"\\n     inkscape:zoom=\\\"0.35\\\"\\n     inkscape:cx=\\\"252.97376\\\"\\n     inkscape:cy=\\\"290.11669\\\"\\n     inkscape:document-units=\\\"px\\\"\\n     inkscape:current-layer=\\\"layer1\\\"\\n     showgrid=\\\"false\\\"\\n     fit-margin-top=\\\"0\\\"\\n     fit-margin-left=\\\"0\\\"\\n     fit-margin-right=\\\"0\\\"\\n     fit-margin-bottom=\\\"0\\\"\\n     borderlayer=\\\"true\\\"\\n     inkscape:showpageshadow=\\\"false\\\"\\n     inkscape:window-width=\\\"780\\\"\\n     inkscape:window-height=\\\"653\\\"\\n     inkscape:window-x=\\\"138\\\"\\n     inkscape:window-y=\\\"36\\\"\\n     inkscape:window-maximized=\\\"0\\\" />\\n  <metadata\\n     id=\\\"metadata4296\\\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\\\"\\\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\\\"http://purl.org/dc/dcmitype/StillImage\\\" />\\n        <dc:title>Blood drop</dc:title>\\n        <dc:date>2011-10-03</dc:date>\\n        <dc:creator>\\n          <cc:Agent>\\n            <dc:title>Ivan d'Hostingue (aka Semhur)</dc:title>\\n          </cc:Agent>\\n        </dc:creator>\\n        <dc:rights>\\n          <cc:Agent>\\n            <dc:title>Ivan d'Hostingue</dc:title>\\n          </cc:Agent>\\n        </dc:rights>\\n        <dc:publisher>\\n          <cc:Agent>\\n            <dc:title>Ivan d'Hostingue</dc:title>\\n          </cc:Agent>\\n        </dc:publisher>\\n        <dc:identifier>http://commons.wikimedia.org/wiki/File:Blood_drop.svg</dc:identifier>\\n        <dc:language>none</dc:language>\\n        <dc:subject>\\n          <rdf:Bag>\\n            <rdf:li>Blood</rdf:li>\\n            <rdf:li>Drop</rdf:li>\\n          </rdf:Bag>\\n        </dc:subject>\\n        <dc:description>A blood drop.</dc:description>\\n        <cc:license\\n           rdf:resource=\\\"http://creativecommons.org/licenses/publicdomain/\\\" />\\n      </cc:Work>\\n      <cc:License\\n         rdf:about=\\\"http://creativecommons.org/licenses/publicdomain/\\\">\\n        <cc:permits\\n           rdf:resource=\\\"http://creativecommons.org/ns#Reproduction\\\" />\\n        <cc:permits\\n           rdf:resource=\\\"http://creativecommons.org/ns#Distribution\\\" />\\n        <cc:permits\\n           rdf:resource=\\\"http://creativecommons.org/ns#DerivativeWorks\\\" />\\n      </cc:License>\\n    </rdf:RDF>\\n  </metadata>\\n  <g\\n     inkscape:label=\\\"Calque 1\\\"\\n     inkscape:groupmode=\\\"layer\\\"\\n     id=\\\"layer1\\\"\\n     transform=\\\"translate(-122.02624,-120.15044)\\\">\\n    <g\\n       transform=\\\"matrix(10.553822,0,0,10.553822,-12220.181,1164.2345)\\\"\\n       style=\\\"display:inline\\\"\\n       id=\\\"g4266\\\">\\n      <path\\n         style=\\\"fill:#ff0000;fill-opacity:1;stroke:none;display:inline\\\"\\n         d=\\\"m 1216.83,-45.241391 c 0,13.08256 -10.6055,23.68807 -23.6881,23.68807 -13.0825,0 -23.6881,-10.60551 -23.6881,-23.68807 0,-13.08257 23.6881,-34.929952 23.6881,-53.688083 0,18.741692 23.6881,40.605513 23.6881,53.688083 z\\\"\\n         id=\\\"path3466\\\"\\n         inkscape:connector-curvature=\\\"0\\\"\\n         sodipodi:nodetypes=\\\"ssscs\\\" />\\n      <path\\n         sodipodi:nodetypes=\\\"ssscs\\\"\\n         inkscape:connector-curvature=\\\"0\\\"\\n         id=\\\"path4236\\\"\\n         d=\\\"m 1216.83,-45.241391 c 0,13.08256 -10.6055,23.68807 -23.6881,23.68807 -13.0825,0 -23.6881,-10.60551 -23.6881,-23.68807 0,-13.08257 23.6881,-34.929952 23.6881,-53.688083 0,18.741692 23.6881,40.605513 23.6881,53.688083 z\\\"\\n         style=\\\"fill:url(#radialGradient4244);fill-opacity:1;stroke:none;display:inline\\\" />\\n      <path\\n         sodipodi:nodetypes=\\\"cscsc\\\"\\n         inkscape:connector-curvature=\\\"0\\\"\\n         id=\\\"path3451\\\"\\n         d=\\\"m 1204.0625,-28.46875 c 12.4738,-10.829294 9.3667,-20.747748 1.5574,-32.864004 -6.7073,-10.40663 -8.0297,-15.133748 -10.0844,-20.457319 2.9218,9.566461 5.6752,15.803058 8.2899,21.375008 5.1581,10.992175 5.54,20.900963 0.2371,31.946315 z\\\"\\n         style=\\\"fill:#ffffff;stroke:none;display:inline;filter:url(#filter4262)\\\" />\\n    </g>\\n  </g>\\n</svg>\\n\"},\"$:/plugins/DMTools/EncounterBuilder/Generate Random Encounter\":{\"title\":\"$:/plugins/DMTools/EncounterBuilder/Generate Random Encounter\",\"caption\":\"Random Encounter\",\"created\":\"20190811020914730\",\"modified\":\"20190910124854280\",\"text\":\"<$button>\\n<$set name=\\\"creatures\\\" filter=\\\"[all[tiddlers+shadows]type[Creature]shuffle[]first[3]]\\\">\\n<$action-sendmessage \\n     $message=\\\"tm-new-tiddler\\\" \\n     summary=\\\"\\\"\\n     creatures=<<creatures>>\\n     text=\\\"<<Encounter>>\\\"\\n/>\\nCreate Encounter\\n</$set>\\n</$button>\"},\"$:/plugins/DMTools/EncounterBuilder/ViewTemplateBottom\":{\"title\":\"$:/plugins/DMTools/EncounterBuilder/ViewTemplateBottom\",\"created\":\"20190910133141299\",\"modified\":\"20190910133312874\",\"tags\":\"$:/tags/ViewTemplate\",\"text\":\"<$list filter=\\\"[all[current]tag[Encounter]]\\\">\\n\\n<div style=\\\"overflow:auto; white-space:nowrap;\\\">\\n<$list filter=\\\"[all[current]list[!!creatures]sort[]each[title]]\\\">\\n<div style=\\\"display:inline-flex;white-space:normal;\\\">\\n{{||$:/plugins/D&DTools/CreatureManager/ViewTemplate}}\\n</div>\\n</$list>\\n</div>\\n\\n</$list>\"},\"$:/plugins/DMTools/EncounterBuilder/ViewTemplateTop\":{\"title\":\"$:/plugins/DMTools/EncounterBuilder/ViewTemplateTop\",\"created\":\"20190910133314838\",\"list-before\":\"$:/core/ui/ViewTemplate/body\",\"modified\":\"20190910180739595\",\"tags\":\"$:/tags/ViewTemplate\",\"text\":\"<$list filter=\\\"[all[current]tag[Encounter]]\\\">\\n\\n<$select field=\\\"last-added-monster\\\" default='Kobold'>\\n<$list filter='[all[shadows+tiddlers]type[Creature]sort[title]]'>\\n<option value=<<currentTiddler>>><$view field='title'/></option>\\n</$list>\\n</$select>\\n<$button>\\n<$action-listops $field=\\\"creatures\\\" $filter=\\\"[enlist:raw{!!creatures}] =[{!!last-added-monster}]\\\" />\\nAdd to Encounter\\n</$button>\\n<$button>\\n<$set name=\\\"count\\\" filter=\\\"[enlist:raw{!!creatures}count[]]\\\">\\n<$list filter=\\\"[range<count>]\\\" variable=\\\"i\\\">\\n<$list filter=\\\"[enlist:raw{!!creatures}nth<i>]\\\" variable=\\\"j\\\">\\n<$set name=\\\"field\\\" filter=\\\"[[creature-]addsuffix<i>addsuffix[-hp]]\\\">\\n<$set name=\\\"hp\\\" filter=\\\"[<j>get[hp]]\\\" select=\\\"0\\\">\\n<$action-setfield $field=<<field>> $value=<<hp>> />\\n</$set>\\n</$set>\\n<$set name=\\\"field\\\" filter=\\\"[[creature-]addsuffix<i>addsuffix[-hp-mod]]\\\">\\n<$action-deletefield $field=<<field>> />\\n</$set>\\n<$set name=\\\"field\\\" filter=\\\"[[creature-]addsuffix<i>addsuffix[-condition]]\\\">\\n<$action-setfield $field=<<field>> $value=\\\"\\\" />\\n</$set>\\n</$list>\\n</$list>\\n</$set>\\nReset HP\\n</$button>\\n\\n@@float:right;\\n<h2>Total XP:\\n<$calc>\\n<$set name=\\\"count\\\" filter=\\\"[enlist:raw{!!creatures}count[]]\\\">\\n<$list filter=\\\"[range<count>]\\\" variable=\\\"i\\\">\\n<$list filter=\\\"[enlist:raw{!!creatures}nth<i>]\\\">\\n{{!!xp}} + \\n</$list>\\n</$list>\\n</$set>\\n0\\n</$calc>\\n</h2>\\n@@\\n\\n\\n<$set name=\\\"count\\\" filter=\\\"[enlist:raw{!!creatures}count[]]\\\">\\n<table>\\n<tr><th>Token</th><th>Creature</th><th>HP</th><th>Conditions</th><th>Notes</th><th></th></tr>\\n<$list filter=\\\"[range<count>]\\\" variable=\\\"i\\\">\\n<tr><td><<i>></td>\\n<$list filter=\\\"[enlist:raw{!!creatures}nth<i>]\\\" variable=\\\"j\\\">\\n<td><$link to=<<j>>><<j>></$link></td>\\n<$set name=\\\"hp-field\\\" filter=\\\"[[creature-]addsuffix<i>addsuffix[-hp]]\\\" select=\\\"0\\\">\\n<$set name=\\\"hp-modifier-field\\\" filter=\\\"[<hp-field>addsuffix[-mod]]\\\" select=\\\"0\\\">\\n<td>\\n<$button>\\n<$set name=\\\"hp-minus-1\\\" filter=\\\"[all[current]get<hp-modifier-field>] [[0]] +[first[]subtract[1]]\\\" select=\\\"0\\\">\\n<$action-setfield $field=<<hp-modifier-field>> $value=<<hp-minus-1>> />\\n--\\n</$set></$button>\\n<$edit-text field=<<hp-field>> size=\\\"3\\\" />\\n<$button>\\n<$set name=\\\"hp-plus-1\\\" filter=\\\"[all[current]get<hp-modifier-field>] [[0]] +[first[]add[1]]\\\" select=\\\"0\\\">\\n<$action-setfield $field=<<hp-modifier-field>> $value=<<hp-plus-1>> />\\n+\\n</$set></$button>\\n<$set name=\\\"bloodied\\\" filter=\\\"[<j>get[hp]divide[2]untrunc[]]\\\" select=\\\"0\\\">\\n<$reveal stateTitle=<<currentTiddler>> stateField=<<hp-field>> type=\\\"lt\\\" text=<<bloodied>> >{{$:/plugins/DMTools/EncounterBuilder/icons/Bloodied\\n}}</$reveal></$set>\\n<$list filter=\\\"[all[current]get<hp-modifier-field>] -[[0]]\\\" variable=\\\"\\\"><br /><div style=\\\"text-align:center\\\">\\n<$button>\\n<$transclude field=<<hp-modifier-field>> />\\n<$set name=\\\"hp-mod\\\" filter=\\\"[all[current]get<hp-modifier-field>]\\\" select=\\\"0\\\">\\n<$set name=\\\"new-hp\\\" filter=\\\"[all[current]get<hp-field>add<hp-mod>]\\\">\\n<$action-setfield $field=<<hp-field>> $value=<<new-hp>> />\\n</$set>\\n</$set>\\n<$action-deletefield $field=<<hp-modifier-field>> />\\n</$button>\\n<$button class=\\\"tc-btn-invisible tc-tiddlylink\\\">\\n{{$:/core/images/cancel-button}}\\n<$action-deletefield $field=<<hp-modifier-field>> />\\n</$button>\\n</div>\\n</$list>\\n</td>\\n</$set>\\n</$set>\\n<$set name=\\\"field\\\" filter=\\\"[[creature-]addsuffix<i>addsuffix[-condition]]\\\" select=\\\"0\\\">\\n<td><$edit-text field=<<field>> size=\\\"20\\\" /></td>\\n</$set>\\n<$set name=\\\"field\\\" filter=\\\"[[creature-]addsuffix<i>addsuffix[-notes]]\\\" select=\\\"0\\\">\\n<td><$edit-text field=<<field>> size=\\\"20\\\" /></td>\\n</$set>\\n<td>\\n<$set name=\\\"i-minus-1\\\" filter=\\\"[<i>subtract[1]]\\\">\\n<$button class=\\\"tc-btn-invisible tc-tiddlylink\\\">\\n{{$:/core/images/delete-button}}\\n\\n<$action-listops $field=\\\"creatures\\\" $filter=\\\"[enlist:raw{!!creatures}first<i-minus-1>] =[enlist:raw{!!creatures}rest<i>]\\\" />\\n<$wikify name=\\\"counts\\\" text=\\\"\\\"\\\"<<i>>,<$set name=\\\"j\\\" filter=\\\"[enlist:raw{!!creatures}count[]]\\\" select=\\\"0\\\"><<j>></$set>\\\"\\\"\\\">\\n<$list filter=\\\"[range<counts>]\\\" variable=\\\"m\\\">\\n<$set name=\\\"n\\\" filter=\\\"[<m>add[1]]\\\" select=\\\"0\\\">\\n<$set name=\\\"old-col\\\" filter=\\\"[[creature-]addsuffix<m>addsuffix[-hp]]\\\" select=\\\"0\\\">\\n<$set name=\\\"new-col\\\" filter=\\\"[[creature-]addsuffix<n>addsuffix[-hp]]\\\" select=\\\"0\\\">\\n<$set name=\\\"new-value\\\" filter=\\\"[all[current]get<new-col>]\\\" select=\\\"0\\\">\\n<$action-setfield $field=<<old-col>> $value=<<new-value>> />\\n</$set>\\n</$set>\\n</$set>\\n<$set name=\\\"old-col\\\" filter=\\\"[[creature-]addsuffix<m>addsuffix[-hp-mod]]\\\" select=\\\"0\\\">\\n<$set name=\\\"new-col\\\" filter=\\\"[[creature-]addsuffix<n>addsuffix[-hp-mod]]\\\" select=\\\"0\\\">\\n<$set name=\\\"new-value\\\" filter=\\\"[all[current]get<new-col>]\\\" select=\\\"0\\\">\\n<$action-setfield $field=<<old-col>> $value=<<new-value>> />\\n</$set>\\n</$set>\\n</$set>\\n<$set name=\\\"old-col\\\" filter=\\\"[[creature-]addsuffix<m>addsuffix[-condition]]\\\" select=\\\"0\\\">\\n<$set name=\\\"new-col\\\" filter=\\\"[[creature-]addsuffix<n>addsuffix[-condition]]\\\" select=\\\"0\\\">\\n<$set name=\\\"new-value\\\" filter=\\\"[all[current]get<new-col>]\\\" select=\\\"0\\\">\\n<$action-setfield $field=<<old-col>> $value=<<new-value>> />\\n</$set>\\n</$set>\\n</$set>\\n<$set name=\\\"old-col\\\" filter=\\\"[[creature-]addsuffix<m>addsuffix[-notes]]\\\" select=\\\"0\\\">\\n<$set name=\\\"new-col\\\" filter=\\\"[[creature-]addsuffix<n>addsuffix[-notes]]\\\" select=\\\"0\\\">\\n<$set name=\\\"new-value\\\" filter=\\\"[all[current]get<new-col>]\\\" select=\\\"0\\\">\\n<$action-setfield $field=<<old-col>> $value=<<new-value>> />\\n</$set>\\n</$set>\\n</$set>\\n\\n</$set>\\n</$list>\\n\\n<$set name=\\\"j\\\" filter=\\\"[enlist:raw{!!creatures}count[]]\\\" select=\\\"0\\\">\\n<$set name=\\\"hp-col\\\" filter=\\\"[[creature-]addsuffix<j>addsuffix[-hp]]\\\" select=\\\"0\\\">\\n<$set name=\\\"hp-mod-col\\\" filter=\\\"[<hp-col>addsuffix[-mod]]\\\" select=\\\"0\\\">\\n<$set name=\\\"condition-col\\\" filter=\\\"[[creature-]addsuffix<j>addsuffix[-condition]]\\\" select=\\\"0\\\">\\n<$set name=\\\"notes-col\\\" filter=\\\"[[creature-]addsuffix<j>addsuffix[-notes]]\\\" select=\\\"0\\\">\\n<$action-deletefield $field=<<hp-col>> />\\n<$action-deletefield $field=<<hp-mod-col>> />\\n<$action-deletefield $field=<<condition-col>> />\\n<$action-deletefield $field=<<notes-col>> />\\n</$set>\\n</$set>\\n</$set>\\n</$set>\\n</$set>\\n\\n</$wikify>\\n</$button>\\n</$set>\\n</td>\\n</$list>\\n\\n</tr>\\n</$list>\\n</table>\\n</$set>\\n\\n\\n</$list>\"}}}"}